{"version":3,"file":"static/webpack/static\\development\\pages\\maker.js.80e5e160e9a2df1bd6ea.hot-update.js","sources":["webpack:///./pages/maker/index.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport axios from 'axios'\r\nimport { parseCookies } from '../../lib/parseCookies'\r\nimport { Navbar, SideBar, WelcomeBar } from '../../components/elements/bar'\r\nimport { ProductGrid } from '../../components/widgets/product'\r\nimport ProductGridList from '../../components/elements/list/ProductGridList'\r\nimport { AddProduct } from '../../components/elements/product'\r\nimport AddArticle from '../../components/elements/article/AddArticle'\r\n\r\nconst UserPage = props => {\r\n\r\n  console.log(props.cookies)\r\n  console.log(props.data)\r\n\r\n  const [data, setData] = useState();\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [clikced, setClicked] = useState(0)\r\n\r\n  useEffect(() => {\r\n    console.log('useEffect runs');\r\n    setIsLoading(true);\r\n    axios.defaults.withCredentials = true\r\n    if (props.cookies.utoken != null) {\r\n      axios.get(process.env.domain + '/api/products/')\r\n        .then(res => {\r\n          console.log(res.data)\r\n          setData(JSON.stringify(res.data));\r\n          setIsLoading(false);\r\n        })\r\n    } else {\r\n      window.location = '/maker/auth'\r\n    }\r\n  }, []);\r\n\r\n  let content = <p>Loading characters...</p>;\r\n\r\n  if (!isLoading && data && data.length > 0) {\r\n    console.log(data)\r\n    const productsList = JSON.parse(data).map(function (product) {\r\n      return <ProductGrid className=\"h-auto w-auto m-2\" key={product.id} data={product} owner=\"ilyass\" />\r\n    })\r\n\r\n    const sideBarData = [{ id: 0, value: 'Products' }, { id: 1, value: 'Add Product' }, { id: 2, value: 'Add Article' }]\r\n    let comp1 = (<ProductGridList className=\"w-full p-2\" data={productsList} />)\r\n    let comp2 = (<AddProduct className=\"w-full p-2\" cookies={props.cookies} />)\r\n    let comp3 = (<AddArticle className=\"w-full p-2\" cookies={props.cookies} />)\r\n    const componentsList = [\r\n      comp1,\r\n      comp2,\r\n      comp3\r\n    ]\r\n\r\n    content = (\r\n      <div className=\"w-screen bg-teal-100\">\r\n        <div className=\"w-full h-auto\">\r\n        <Navbar cookies={props.cookies} className=\"w-full\" />\r\n        <WelcomeBar className=\"w-screen pt-12\" />\r\n        <div className=\"w-screen flex pt-10\">\r\n          <div className=\"w-auto h-full\">\r\n            <SideBar className=\"w-full h-full\" clicked={clikced} data={sideBarData} onClick={(x) => setClicked(x)} />\r\n          </div>\r\n          <div className=\"w-screen h-full\">\r\n            {componentsList[clikced]}\r\n          </div>\r\n        </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  } else if (!isLoading && (!data || data.length === 0)) {\r\n    content = <p>Could not fetch any data.</p>;\r\n  }\r\n  return content;\r\n};\r\n\r\nUserPage.getInitialProps = ({ req }) => {\r\n  const cookies = parseCookies(req);\r\n\r\n  return {\r\n    cookies: cookies,\r\n    data: req.data\r\n  };\r\n};\r\n\r\nexport default UserPage;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAJA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAQA;AACA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAMA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AAFA;AAIA;AACA;AACA;;;;A","sourceRoot":""}