{"version":3,"file":"static/webpack/static\\development\\pages\\stories.js.8d85a9675fc4e492cded.hot-update.js","sources":["webpack:///./pages/stories/index.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { parseCookies } from '../../lib/parseCookies'\r\nimport { Navbar, WelcomeBar } from '../../components/elements/bar'\r\nimport ArticleList from '../../components/elements/list/ArticleList'\r\nimport { postRequest } from '../../services/api/post/postRequest'\r\nimport ArticleBanner from '../../components/widgets/article/ArticleBanner'\r\nimport querystring from 'querystring'\r\nimport { getRequest } from '../../services/api/get/getRequest'\r\nimport Layout from '../../components/layout'\r\n\r\nconst Stories = props => {\r\n\r\n    console.log(props.cookies)\r\n    console.log(props.data)\r\n\r\n    const [data, setData] = useState(null);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n\r\n    useEffect(() => {\r\n        console.log('useEffect runs');\r\n        setIsLoading(true);\r\n        postRequest(querystring.stringify({\r\n            operation: \"all\"\r\n        }), props.cookies['csrftoken'],process.env.domain + '/api/articles/')\r\n            .then(res => {\r\n                console.log(res)\r\n                setData(JSON.stringify(res))\r\n                setIsLoading(false)\r\n            })\r\n    }, []);\r\n\r\n    let body = null;\r\n\r\n    if (!isLoading) {\r\n\r\n        const articlesList = (data) ? JSON.parse(data).map(function (article) {\r\n            return <ArticleBanner className=\"h-auto w-full max-w-screen-md m-4\" key={article.id} data={article} />\r\n        }) : null\r\n\r\n        let articles = (<ArticleList className=\"w-full p-2\" data={articlesList} />)\r\n\r\n        body = (\r\n            <div className=\"w-screen flex flex-col items-center\">\r\n                <div className=\"w-full h-auto flex pt-10\">\r\n                    <div className=\"w-full h-auto flex flex-col items-center\">\r\n                        {articles}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    } else if (!isLoading && (!data || data.length === 0)) {\r\n        body = null;\r\n    }\r\n\r\n    let content = (\r\n        <Layout tags={props.tags}>\r\n            {body}\r\n        </Layout>\r\n    )\r\n\r\n    return content;\r\n};\r\n\r\nStories.getInitialProps = async ({ req }) => {\r\n    const cookies = parseCookies(req);\r\n\r\n    const tags = await getRequest(process.env.domain + '/api/categories/').then((res) => {\r\n        return (res)\r\n    })\r\n\r\n    return {\r\n        cookies: cookies,\r\n        tags: tags\r\n    };\r\n};\r\n\r\nexport default Stories;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAJA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAOA;AACA;AACA;AACA;AACA;AADA;AAIA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAIA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAIA;AACA;AACA;AANA;AAGA;AAHA;AAQA;AACA;AAFA;AACA;AARA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAYA;;;;A","sourceRoot":""}