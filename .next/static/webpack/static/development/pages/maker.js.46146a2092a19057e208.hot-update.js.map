{"version":3,"file":"static/webpack/static\\development\\pages\\maker.js.46146a2092a19057e208.hot-update.js","sources":["webpack:///./components/widgets/category/AddCategory.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react'\r\nimport SelectCategory from '../../graphics/category/SelectCategory'\r\nimport { RemovableTag } from '../../graphics/tags'\r\n\r\nconst AddCategory = props => {\r\n\r\n    const select = useRef()\r\n    const forceUpdate = React.useReducer(() => ({}))[1]\r\n    const [categoriesList, setCategoriesList] = useState([])\r\n    const [lvl, setLvl] = useState(0)\r\n    const [parent, setParent] = useState(null)\r\n    let currentLvl = 0\r\n    let parentId = null\r\n\r\n    const setCategory = (category) => {\r\n        props.addCategory(category)\r\n        parentId = category.id\r\n        setParent(parentId)\r\n        let newLvl = category.lvl + 1\r\n        setLvl(newLvl)\r\n        currentLvl = newLvl\r\n        initList()\r\n    }\r\n\r\n    const initList = () => {\r\n        if (props.categories.length > 0) {\r\n            let ncl = props.categories.map(function (category) {\r\n                if (category.lvl < currentLvl) {\r\n                    return (\r\n                        <RemovableTag\r\n                            key={category.id}\r\n                            category={category}\r\n                            onClick={() => {\r\n                                currentLvl = category.lvl\r\n                                setLvl(category.lvl)\r\n                                if (currentLvl == 0) {\r\n                                    parentId = null\r\n                                    setParent(parentId)\r\n                                } else {\r\n                                    parentId = props.categories[currentLvl - 1].id\r\n                                    setParent(parentId)\r\n                                }\r\n                                console.log(lvl)\r\n                                props.removeCategory(category.lvl)\r\n                                console.log(lvl)\r\n                                initList()\r\n                            }} />\r\n                    )\r\n                }\r\n            })\r\n            ncl.push(<SelectCategory lvl={props.categories[props.categories.length -1].id} parent={props.categories[props.categories.length -1]} csrftoken={props.csrftoken} setCategory={setCategory} />)\r\n            setCategoriesList(ncl)\r\n        } else {\r\n            let select = (<SelectCategory lvl={0} parent={null} csrftoken={props.csrftoken} setCategory={setCategory} />)\r\n            let d = (\r\n                    <div className=\"h-auto w-auto bg-gray-300\" >\r\n                        <SelectCategory lvl={0} parent={null} csrftoken={props.csrftoken} setCategory={setCategory} />\r\n                    </div>\r\n                )\r\n            setCategoriesList(d)\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        initList()\r\n    }, [])\r\n\r\n    let content = (\r\n        <div className={props.className}>\r\n            <div className=\"w-full\">\r\n                <label className=\"block mb-1 font-sans font-medium\">Add Product Category</label>\r\n                <div className=\"h-auto w-full container content-start content-center mx-auto flex flex-wrap py-2 px-3\">\r\n                    <div className=\"flex\">\r\n                        <div className=\"h-8\"/>\r\n                        {categoriesList}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n    return content\r\n}\r\n\r\nexport default AddCategory"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AAJA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAjBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAmBA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAOA;AACA;AACA;AACA;;;;A","sourceRoot":""}