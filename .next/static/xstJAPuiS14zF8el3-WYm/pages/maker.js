(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{vasz:function(e,t,a){"use strict";a.r(t);var n=a("q1tI"),l=a.n(n),o=a("vDqi"),s=a.n(o),c=a("tH+X"),r=l.a.createElement,i=function(e){return r("div",{className:e.className},r("div",{className:"container h-full w-auto content-center mx-auto flex flex-wrap"},r("h2",{className:"font-sans font-bold text-gray-900"},"MORMADE")))},u=l.a.createElement,m=function(e){return u("div",{className:e.className},u("div",{className:"rounded-full h-full w-full flex items-center justify-center"},u("img",{src:e.src})))},f=l.a.createElement,d=function(e){var t=Object(n.useRef)(null);return f("div",{className:e.className},f("div",{className:"relative m-1"},f("input",{className:"absolute invisible",ref:t,accept:"image/jpeg, image/jpg, image/png",multiple:!0,type:"file",onChange:function(t){e.onChange(Array.from(t.target.files))}}),f("div",{className:"container flex content-center flex-wrap text-center h-32 w-32 border border-1 border-gray-900 hover:bg-xw-200",role:"button",onClick:function(){t.current.click()}},f("span",{className:"text-center h-auto w-full"},"Upload Photo"))))},v=l.a.createElement,g=function(e){return v("div",{className:e.className},v("div",{className:"relative h-full w-full bg-yellow-300"},v("img",{className:"absolute w-full h-full object-cover",src:e.src}),v("div",{className:"absolute top-0 right-0 container flex content-center flex-wrap text-center h-6 w-6 bg-opacity-50 bg-gray-700 rounded-full hover:bg-gray-900 focus:outline-none m-1",role:"button",onClick:function(){return e.onRemove(e.index)}},v("span",{className:"text-center font-sans font-bold text-xw-100 h-auto w-full"},"x"))))},p=l.a.createElement,N=function(e){return p("div",{className:e.className},p("div",{className:"h-full w-auto container content-center mx-auto flex flex-wrap"},p(m,{className:"w-5 h-5",src:"/profile.png"}),p("button",{className:"focus:outline-none",type:"button",onClick:e.onClick},p("p",{className:"font-sans font-medium text-sm text-gray-900 text-center ml-2"},e.username))))},h=l.a.createElement,w=function(e){var t=Object(n.useState)(!1),a=t[0],l=t[1],o=!1;return h("div",{className:e.className},h("div",{className:"fixed z-50 h-10 w-full flex bg-white"},h("div",{className:"flex flex-row"},h(i,{className:"h-full w-auto ml-6"})),h("div",{className:"w-full flex flex-row-reverse"},h(N,{className:"h-full w-auto mr-6",username:"ilyass",onClick:function(){o=!0,console.log(o),l(1!=a)}}))),h(k,{className:"z-50",cookies:e.cookies,drop:a,callBack:function(){o?o=!1:(console.log("cancel"),l(!1))}}))},b=a("oD+g");var x=l.a.createElement,k=function(e){var t,a,l=x("div",{className:""},x("div",{className:"hover:bg-xw-100 w-24 border border-gray-900 bg-white"},x("button",{className:"focus:outline-none font-sans font-medium text-gray-900 text-sm ml-2",type:"button",onClick:function(){Object(b.a)({},"logout",e.cookies.csrftoken)}},"logout"))),o=Object(n.useRef)(null);t=o,a=function(t){"keydown"!=t.type?e.callBack():27==t.keyCode&&e.callBack()},Object(n.useEffect)((function(){var e=function(e){t.current&&!t.current.contains(e.target)&&setTimeout((function(){return a(e)}),200)};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),document.addEventListener("keydown",e),function(){document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e),document.removeEventListener("keydown",e)}}),[t,a]);var s=x("div",{className:e.className},x("div",{className:"fixed z-50 top-0 right-0 mr-4 mt-10"})),c=x("div",{className:e.className},x("div",{ref:o,className:"fixed z-50 top-0 right-0 mr-4 mt-10"},l));return 1==e.drop?c:s},y=l.a.createElement,C=function(e){var t="w-full h-full bg-transparent text-left hover:text-opacity-75 focus:outline-none font-sans font-bold text-gray-900 text-sm py-2 px-4";return"true"==e.clicked&&(t="w-full h-full bg-transparent text-left focus:outline-none font-sans font-bold text-red-700 text-sm py-2 px-4"),y("div",{className:e.className},y("button",{className:t,type:"button",onClick:e.onClick},e.value))},E=l.a.createElement,j=function(e){var t=Object(n.useState)(e.clicked),a=t[0],l=t[1],o=e.data.map((function(t){return t.id==a?E(C,{className:"w-full h-auto",key:t.id,value:t.value,clicked:"true",onClick:function(){l(t.id),e.onClick(t.id)}}):E(C,{className:"w-full h-auto",key:t.id,value:t.value,clicked:"false",onClick:function(){l(t.id),e.onClick(t.id)}})}));return E("div",{className:e.className},E("div",{className:"h-full w-full m-4"},o))},O=l.a.createElement,P=function(e){return O("article",{className:e.className},O("div",{className:"container h-auto w-full content-center"},O("div",{className:"relative w-full bg-yellow-300 pb-1/1"},O("img",{className:"absolute w-full h-full object-cover",src:e.data.images[0].path}),O("button",{className:"absolute top-0 right-0 h-10 w-10 m-2"},O("img",{src:"/heart-white.png"}))),O("div",{className:"h-auto w-full"},O("h3",{className:"leading-tight font-sans font-medium text-base text-gray-900 pt-2"},e.data.name),O("strong",{className:"leading-tight font-sans font-normal text-sm text-gray-800"},e.owner),O("p",{className:"leading-tight font-sans font-semibold text-lg text-gray-900"},"MAD "+e.data.price))))},R=l.a.createElement,D=function(e){return R("div",{className:e.className},R("div",{className:"w-full h-auto grid grid-cols-2 sm:grid-cols-3 md:grid-cols-3 lg:grid-cols-3 xl:grid-cols-4 gap-1"},e.data))},L=a("o0o1"),S=a.n(L),_=a("6P1G"),A=a("EDLy"),I=l.a.createElement,T=function(e){var t=Object(n.useState)(null),a=t[0],l=t[1],o=function(t){e.removeImage(t),s()},s=function(){e.files.length>0?l(e.files.map((function(e,t){var a=(window.URL?URL:webkitURL).createObjectURL(e);return console.log(t),I(g,{className:"w-32 h-32 m-1",src:a,key:t,index:t,onRemove:o})}))):l(null)};return I("div",{className:e.className},I("div",{className:"w-full"},I("label",{className:"block mb-1 font-sans font-medium"},"Add Product Images"),I("div",{className:"h-auto w-full container flex content-start flex-wrap border py-2 px-3"},a,I(d,{onChange:function(t){t.length>0&&(e.addImage(t),s())}}))))};function q(e,t,a){return new Promise((function(e,n){var l=new FormData;l.append("name",t.name),l.append("image",t,t.name);s.a.post("http://localhost:8000/images/",l,{headers:{"content-type":"multipart/form-data","X-CSRFToken":a}}).then((function(t){e(t)}))}))}var z=a("s4NR"),U=a.n(z);function X(e,t){return new Promise((function(a,n){var l={headers:{"Content-Type":"application/x-www-form-urlencoded","X-CSRFToken":t}};e.pics_list=U.a.stringify(e.pics_list);var o={data:U.a.stringify(e)};console.log(o),s.a.defaults.withCredentials=!0,s.a.post("http://localhost:8000/products/",U.a.stringify(o),l).then((function(e){a(e.data)})).catch((function(e){n(e)}))}))}var J=l.a.createElement,B=function(e){Object(n.useRef)();var t=Object(n.useRef)(),a=e.data.map((function(e){return J("option",{key:e.id,value:e.value})}));return J("div",{className:e.className},J("div",{className:"border border-1 p-1"},J("input",{className:"font-sans font-medium text-gray-700 leading-tight hover:outline-none focus:outline-none",ref:t,list:"data",onChange:function(){var a=t.current.value;e.data.map((function(t){t.value==a&&e.setCategory(t.id,t.value,e.lvl)}))}}),J("datalist",{id:"data"},a)))},F=l.a.createElement,M=function(e){var t=Object(n.useState)(null),a=(t[0],t[1],[]);return F("div",{className:e.className},F("div",{className:"w-full"},F("label",{className:"block mb-1 font-sans font-medium"},"Add Product Category"),F("div",{className:"h-auto w-full container flex content-start flex-wrap py-2 px-3"},F(B,{data:[{id:0,value:"Home"},{id:1,value:"Decoration"}],lvl:0,setCategory:function(e,t,n){a.splice(n,0,e),console.log(t)}}))))},H=l.a.createElement,G=function(e){var t={pics_list:[]},a=Object(n.useState)([]),l=a[0],o=(a[1],function(e,a){"name"==a?t.name=e.target.value:"description"==a?t.description=e.target.value:"price"==a?t.price=e.target.value:"quantity"==a&&(t.quantity=e.target.value)});return H("div",{className:"m-4"},H("form",{className:"",action:""},H(_.d,{label:"Product Name",onChange:function(e){return o(e,"name")}}),H(_.c,{label:"Product Description",onChange:function(e){return o(e,"description")}}),H(_.d,{label:"Product Region",onChange:function(e){return o(e,"region")}}),H(_.a,{label:"Price",onChange:function(e){return o(e,"price")}}),H(_.a,{label:"Quantity",onChange:function(e){return o(e,"quantity")}}),H(M,{className:""}),H(T,{files:l,addImage:function(e){e.forEach((function(e){return l.push(e)}),void 0)},removeImage:function(e){l.splice(e,1)}}),H(A.a,{className:"w-full h-12 mt-8 mb-4",value:"ADD PRODUCT",onClick:function(a){var n,o;return S.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:a.preventDefault(),n=0;case 2:if(!(n<l.length)){s.next=10;break}return s.next=5,S.a.awrap(q(0,l[0],e.cookies.csrftoken).then((function(e){return e})));case 5:o=s.sent,t.pics_list.push(o.data);case 7:n++,s.next=2;break;case 10:console.log(t),X(t,e.cookies.csrftoken).then((function(e){console.log(e)}));case 12:case"end":return s.stop()}}),null,null,null,Promise)}})))},Q=l.a.createElement,K=function(e){console.log(e.cookies),console.log(e.data);var t=Object(n.useState)(),a=t[0],l=t[1],o=Object(n.useState)(!1),c=o[0],r=o[1],i=Object(n.useState)(0),u=i[0],m=i[1];Object(n.useEffect)((function(){console.log("useEffect runs"),r(!0),s.a.defaults.withCredentials=!0,null!=e.cookies.utoken?s.a.get("http://localhost:8000/products/").then((function(e){console.log(e.data),l(JSON.stringify(e.data)),r(!1)})):window.location="/maker/auth"}),[]);var f=Q("p",null,"Loading characters...");if(!c&&a&&a.length>0){console.log(a);var d=JSON.parse(a).map((function(e){return Q(P,{className:"h-auto w-auto m-2",key:e.id,data:e,owner:"ilyass"})})),v=[Q(D,{className:"p-2",data:d}),Q(G,{cookies:e.cookies})];f=Q("div",{className:"w-full"},Q(w,{cookies:e.cookies,className:"w-full"}),Q("div",{className:"w-full flex pt-10"},Q("div",{className:"w-64 h-full"},Q(j,{className:"w-full h-full",clicked:u,data:[{id:0,value:"Products"},{id:1,value:"Add Product"}],onClick:function(e){return m(e)}})),Q("div",{className:"w-full h-full"},v[u])))}else c||a&&0!==a.length||(f=Q("p",null,"Could not fetch any data."));return f};K.getInitialProps=function(e){var t=e.req;return{cookies:Object(c.a)(t),data:t.data}};t.default=K},"yCN/":function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/maker",function(){return a("vasz")}])}},[["yCN/",0,1,2,6]]]);