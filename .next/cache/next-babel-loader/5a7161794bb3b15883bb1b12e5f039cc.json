{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState, useEffect, useRef } from 'react';\nimport SelectCategory from '../../graphics/category/SelectCategory';\nimport { RemovableTag } from '../../graphics/tags';\n\nconst AddProductCategory = props => {\n  const select = useRef();\n  const forceUpdate = React.useReducer(() => ({}))[1];\n  const {\n    0: categoriesList,\n    1: setCategoriesList\n  } = useState([]);\n  const {\n    0: lvl,\n    1: setLvl\n  } = useState(0);\n  const {\n    0: parent,\n    1: setParent\n  } = useState(null);\n  let currentLvl = 0;\n  let parentId = null;\n\n  const setCategory = category => {\n    props.addCategory(category);\n    parentId = category.id;\n    setParent(parentId);\n    let newLvl = category.lvl + 1;\n    setLvl(newLvl);\n    currentLvl = newLvl;\n    initList();\n  };\n\n  const initList = () => {\n    if (props.categories.length > 0) {\n      let ncl = props.categories.map(function (category) {\n        if (category.lvl < currentLvl) {\n          return __jsx(RemovableTag, {\n            className: \"w-auto sm:w-full\",\n            key: category.id,\n            separator: \"\\u203A\",\n            category: category,\n            onClick: () => {\n              currentLvl = category.lvl;\n              setLvl(category.lvl);\n\n              if (currentLvl == 0) {\n                parentId = null;\n                setParent(parentId);\n              } else {\n                parentId = props.categories[currentLvl - 1].id;\n                setParent(parentId);\n              }\n\n              console.log(lvl);\n              props.removeCategory(category.lvl);\n              console.log(lvl);\n              initList();\n            }\n          });\n        }\n      });\n      ncl.push(__jsx(SelectCategory, {\n        separator: \"\\u203A\",\n        lvl: props.categories[props.categories.length - 1].id,\n        parent: props.categories[props.categories.length - 1],\n        csrftoken: props.csrftoken,\n        setCategory: setCategory\n      }));\n      setCategoriesList(ncl);\n    } else {\n      let select = __jsx(SelectCategory, {\n        separator: \"\\u203A\",\n        lvl: 0,\n        parent: null,\n        csrftoken: props.csrftoken,\n        setCategory: setCategory\n      });\n\n      let d = __jsx(\"div\", {\n        className: \"h-auto w-auto bg-gray-300\"\n      }, __jsx(SelectCategory, {\n        separator: \"\\u203A\",\n        lvl: 0,\n        parent: null,\n        csrftoken: props.csrftoken,\n        setCategory: setCategory\n      }));\n\n      setCategoriesList(d);\n    }\n  };\n\n  useEffect(() => {\n    initList();\n  }, []);\n\n  let content = __jsx(\"div\", {\n    className: props.className\n  }, __jsx(\"div\", {\n    className: \"w-full\"\n  }, __jsx(\"label\", {\n    className: \"block mb-1 font-sans font-medium\"\n  }, \"Add Product Category\"), __jsx(\"div\", {\n    className: \"h-auto w-full container content-start content-center mx-auto flex flex-wrap py-2 px-3\"\n  }, __jsx(\"div\", {\n    className: \"flex\"\n  }, __jsx(\"div\", {\n    className: \"h-8\"\n  }), categoriesList))));\n\n  return content;\n};\n\nexport default AddProductCategory;","map":null,"metadata":{},"sourceType":"module"}