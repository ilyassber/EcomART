{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState, useEffect, useRef } from 'react';\nimport { getCategories } from '../../../services/api/fetch/getCategories';\n\nvar SelectCategory = function SelectCategory(props) {\n  var selectedRef = useRef();\n\n  var _useState = useState(),\n      data = _useState[0],\n      setData = _useState[1];\n\n  var currentLvl = null;\n  var currentParent = null;\n  var content = null;\n\n  var getData = function getData() {\n    setData(null);\n\n    if (props.all == true) {\n      var tags = localStorage.getItem('_tags');\n\n      if (tags == null) {\n        getCategories(null, null, null, props.csrftoken).then(function (res) {\n          localStorage.setItem('_tags', JSON.stringify(res));\n          setData(JSON.stringify(res));\n        });\n      } else {\n        setData(tags);\n      }\n    } else {\n      getCategories(null, currentLvl, props.parent, props.csrftoken).then(function (res) {\n        setData(JSON.stringify(res));\n      });\n    }\n  };\n\n  useEffect(function () {\n    currentLvl = props.lvl;\n    currentParent = props.parent;\n    getData();\n  }, []);\n\n  if (data && JSON.parse(data).length > 0) {\n    var options = JSON.parse(data).map(function (option) {\n      return __jsx(\"option\", {\n        key: option.id,\n        value: option.name\n      });\n    });\n\n    var getOption = function getOption() {\n      var value = selectedRef.current.value;\n      JSON.parse(data).map(function (option) {\n        if (option.name == value) {\n          props.setCategory(option);\n          currentLvl = option.lvl + 1;\n          getData();\n        }\n      });\n    };\n\n    content = __jsx(\"div\", {\n      className: props.className\n    }, __jsx(\"div\", {\n      className: \"h-8 flex\"\n    }, __jsx(\"div\", {\n      className: \"h-full w-auto content-center mx-auto flex flex-wrap font-sans font-bold\"\n    }, __jsx(\"b\", {\n      className: \"text-gray-900 text-sm text-center ml-2 mr-2\"\n    }, props.separator)), __jsx(\"div\", null, __jsx(\"input\", {\n      className: \"h-8 w-auto font-sans font-medium border text-gray-700 leading-tight hover:outline-none focus:outline-none p-1\",\n      ref: selectedRef,\n      list: \"data\",\n      onChange: getOption\n    }), __jsx(\"datalist\", {\n      id: \"data\"\n    }, options))));\n  }\n\n  return content;\n};\n\nexport default SelectCategory;","map":null,"metadata":{},"sourceType":"module"}