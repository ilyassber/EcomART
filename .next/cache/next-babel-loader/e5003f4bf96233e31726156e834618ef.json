{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport { parseCookies } from '../../lib/parseCookies';\nimport { Navbar, WelcomeBar } from '../../components/elements/bar';\nimport ArticleList from '../../components/elements/list/ArticleList';\nimport { postRequest } from '../../services/api/post/postRequest';\nimport ArticleBanner from '../../components/widgets/article/ArticleBanner';\nimport querystring from 'querystring';\nimport { getRequest } from '../../services/api/get/getRequest';\nimport Layout from '../../components/layout';\n\nconst Stories = props => {\n  console.log(props.cookies);\n  console.log(props.data);\n  const {\n    0: data,\n    1: setData\n  } = useState(null);\n  const {\n    0: isLoading,\n    1: setIsLoading\n  } = useState(false);\n  useEffect(() => {\n    console.log('useEffect runs');\n    setIsLoading(true);\n    postRequest(querystring.stringify({\n      operation: \"all\"\n    }), props.cookies['csrftoken'], process.env.domain + '/api/articles/').then(res => {\n      console.log(res);\n      setData(JSON.stringify(res));\n      setIsLoading(false);\n    });\n  }, []);\n  let body = null;\n\n  if (!isLoading) {\n    const articlesList = data ? JSON.parse(data).map(function (article) {\n      return __jsx(ArticleBanner, {\n        className: \"h-auto w-full max-w-screen-md m-4\",\n        key: article.id,\n        data: article\n      });\n    }) : null;\n\n    let articles = __jsx(ArticleList, {\n      className: \"w-full p-2\",\n      data: articlesList\n    });\n\n    body = __jsx(\"div\", {\n      className: \"w-full flex flex-col items-center\"\n    }, articles);\n  } else if (!isLoading && (!data || data.length === 0)) {\n    body = null;\n  }\n\n  let content = __jsx(Layout, {\n    tags: props.tags\n  }, body);\n\n  return content;\n};\n\nStories.getInitialProps = async ({\n  req\n}) => {\n  const cookies = parseCookies(req);\n  const tags = await getRequest(process.env.domain + '/api/categories/').then(res => {\n    return res;\n  });\n  return {\n    cookies: cookies,\n    tags: tags\n  };\n};\n\nexport default Stories;","map":null,"metadata":{},"sourceType":"module"}