{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport { parseCookies } from '../../lib/parseCookies';\nimport { Navbar, WelcomeBar } from '../../components/elements/bar';\nimport ArticleList from '../../components/elements/list/ArticleList';\nimport { postRequest } from '../../services/api/post/postRequest';\nimport ArticleBanner from '../../components/widgets/article/ArticleBanner';\nimport querystring from 'querystring';\n\nconst Stories = props => {\n  console.log(props.cookies);\n  console.log(props.data);\n  const {\n    0: data,\n    1: setData\n  } = useState(null);\n  const {\n    0: isLoading,\n    1: setIsLoading\n  } = useState(false);\n  useEffect(() => {\n    console.log('useEffect runs');\n    setIsLoading(true);\n    postRequest(querystring.stringify({\n      operation: \"all\"\n    }), props.cookies['csrftoken'], process.env.domain + '/api/articles/').then(res => {\n      console.log(res);\n      setData(JSON.stringify(res));\n      setIsLoading(false);\n    });\n  }, []);\n  let content = null;\n\n  if (!isLoading) {\n    const articlesList = data ? JSON.parse(data).map(function (article) {\n      return __jsx(ArticleBanner, {\n        className: \"h-auto w-full max-w-screen-md m-4\",\n        key: article.id,\n        data: article\n      });\n    }) : null;\n\n    let articles = __jsx(ArticleList, {\n      className: \"w-full p-2\",\n      data: articlesList\n    });\n\n    content = __jsx(\"div\", {\n      className: \"w-screen flex flex-col items-center\"\n    }, __jsx(Navbar, {\n      cookies: props.cookies,\n      className: \"w-full\"\n    }), __jsx(WelcomeBar, {\n      className: \"w-screen pt-12\"\n    }), __jsx(\"div\", {\n      className: \"w-full h-auto flex pt-10\"\n    }, __jsx(\"div\", {\n      className: \"w-full h-auto flex flex-col items-center\"\n    }, articles)));\n  } else if (!isLoading && (!data || data.length === 0)) {\n    content = null;\n  }\n\n  return content;\n};\n\nStories.getInitialProps = ({\n  req\n}) => {\n  const cookies = parseCookies(req);\n  return {\n    cookies: cookies\n  };\n};\n\nexport default Stories;","map":null,"metadata":{},"sourceType":"module"}