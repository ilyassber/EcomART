{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport { TxtField, TxtArea, IntField } from '../../graphics/textFields';\nimport { BtnBbw } from '../../graphics/buttons';\nimport AddImageGrid from '../../widgets/image/AddImageGrid';\nimport { uploadImage } from '../../../services/api/uploadImage';\nimport { addProduct } from '../../../services/api/addProduct';\nimport AddCategory from '../../widgets/category/AddCategory';\n\nconst AddProduct = props => {\n  let data = {};\n  data['pics_list'] = [];\n  const {\n    0: files,\n    1: setFiles\n  } = useState([]);\n\n  const getValue = (event, access) => {\n    if (access == 'name') {\n      data['name'] = event.target.value;\n    } else if (access == 'description') {\n      data['description'] = event.target.value;\n    } else if (access == 'price') {\n      data['price'] = event.target.value;\n    } else if (access == 'quantity') {\n      data['quantity'] = event.target.value;\n    }\n  };\n\n  const appendFile = newFiles => {\n    newFiles.forEach(f => files.push(f), this);\n  };\n\n  const removeFile = index => {\n    files.splice(index, 1);\n  };\n\n  const handleSubmit = async event => {\n    event.preventDefault();\n\n    for (let i = 0; i < files.length; i++) {\n      let response = await uploadImage(event, files[0], props.cookies['csrftoken']).then(res => res);\n      data['pics_list'].push(response.data);\n    }\n\n    console.log(data);\n    addProduct(data, props.cookies['csrftoken']).then(res => {\n      console.log(res);\n    });\n  };\n\n  let content = __jsx(\"div\", {\n    className: \"m-4\"\n  }, __jsx(\"form\", {\n    className: \"\",\n    action: \"\"\n  }, __jsx(TxtField, {\n    label: \"Product Name\",\n    onChange: event => getValue(event, 'name')\n  }), __jsx(TxtArea, {\n    label: \"Product Description\",\n    onChange: event => getValue(event, 'description')\n  }), __jsx(TxtField, {\n    label: \"Product Region\",\n    onChange: event => getValue(event, 'region')\n  }), __jsx(IntField, {\n    label: \"Price\",\n    onChange: event => getValue(event, 'price')\n  }), __jsx(IntField, {\n    label: \"Quantity\",\n    onChange: event => getValue(event, 'quantity')\n  }), __jsx(AddCategory, {\n    className: \"\"\n  }), __jsx(AddImageGrid, {\n    files: files,\n    addImage: appendFile,\n    removeImage: removeFile\n  }), __jsx(BtnBbw, {\n    className: \"w-full h-12 mt-8 mb-4\",\n    value: \"ADD PRODUCT\",\n    onClick: handleSubmit\n  })));\n\n  return content;\n};\n\nexport default AddProduct;","map":null,"metadata":{},"sourceType":"module"}