{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport { parseCookies } from '../../lib/parseCookies';\nimport { Navbar, WelcomeBar } from '../../components/elements/bar';\nimport ArticleList from '../../components/elements/list/ArticleList';\nimport { postRequest } from '../../services/api/post/postRequest';\nimport ArticleBanner from '../../components/widgets/article/ArticleBanner';\nimport querystring from 'querystring';\n\nvar Stories = function Stories(props) {\n  console.log(props.cookies);\n  console.log(props.data);\n\n  var _useState = useState(null),\n      data = _useState[0],\n      setData = _useState[1];\n\n  var _useState2 = useState(false),\n      isLoading = _useState2[0],\n      setIsLoading = _useState2[1];\n\n  useEffect(function () {\n    console.log('useEffect runs');\n    setIsLoading(true);\n    postRequest(querystring.stringify({\n      operation: \"all\"\n    }), props.cookies['csrftoken'], process.env.domain + '/api/articles/').then(function (res) {\n      console.log(res);\n      setData(JSON.stringify(res));\n      setIsLoading(false);\n    });\n  }, []);\n  var content = null;\n\n  if (!isLoading) {\n    var articlesList = data ? JSON.parse(data).map(function (article) {\n      return __jsx(ArticleBanner, {\n        className: \"h-auto w-full max-w-screen-md m-4\",\n        key: article.id,\n        data: article\n      });\n    }) : null;\n\n    var articles = __jsx(ArticleList, {\n      className: \"w-full p-2\",\n      data: articlesList\n    });\n\n    content = __jsx(\"div\", {\n      className: \"w-screen flex flex-col items-center\"\n    }, __jsx(Navbar, {\n      cookies: props.cookies,\n      className: \"w-full\"\n    }), __jsx(WelcomeBar, {\n      className: \"w-screen pt-12\"\n    }), __jsx(\"div\", {\n      className: \"w-full h-auto flex pt-10\"\n    }, __jsx(\"div\", {\n      className: \"w-full h-auto flex flex-col items-center\"\n    }, articles)));\n  } else if (!isLoading && (!data || data.length === 0)) {\n    content = null;\n  }\n\n  return content;\n};\n\nStories.getInitialProps = function (_ref) {\n  var req = _ref.req;\n  var cookies = parseCookies(req);\n  return {\n    cookies: cookies\n  };\n};\n\nexport default Stories;","map":null,"metadata":{},"sourceType":"module"}