{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { parseCookies } from '../../lib/parseCookies';\nimport { Navbar, SideBar, WelcomeBar } from '../../components/elements/bar';\nimport { ProductGrid } from '../../components/widgets/product';\nimport ProductGridList from '../../components/elements/list/ProductGridList';\nimport { AddProduct } from '../../components/elements/product';\nimport AddArticle from '../../components/elements/article/AddArticle';\n\nconst UserPage = props => {\n  console.log(props.cookies);\n  console.log(props.data);\n  const {\n    0: data,\n    1: setData\n  } = useState();\n  const {\n    0: isLoading,\n    1: setIsLoading\n  } = useState(false);\n  const {\n    0: clikced,\n    1: setClicked\n  } = useState(0);\n  useEffect(() => {\n    console.log('useEffect runs');\n    setIsLoading(true);\n    axios.defaults.withCredentials = true;\n\n    if (props.cookies.utoken != null) {\n      axios.get(process.env.domain + '/api/products/').then(res => {\n        console.log(res.data);\n        setData(JSON.stringify(res.data));\n        setIsLoading(false);\n      });\n    } else {\n      window.location = '/maker/auth';\n    }\n  }, []);\n\n  let content = __jsx(\"p\", null, \"Loading characters...\");\n\n  if (!isLoading && data && data.length > 0) {\n    console.log(data);\n    const productsList = JSON.parse(data).map(function (product) {\n      return __jsx(ProductGrid, {\n        className: \"h-auto w-auto m-2\",\n        key: product.id,\n        data: product,\n        owner: \"ilyass\"\n      });\n    });\n    const sideBarData = [{\n      id: 0,\n      value: 'Products'\n    }, {\n      id: 1,\n      value: 'Add Product'\n    }, {\n      id: 2,\n      value: 'Add Article'\n    }];\n\n    let comp1 = __jsx(ProductGridList, {\n      className: \"w-full p-2\",\n      data: productsList\n    });\n\n    let comp2 = __jsx(AddProduct, {\n      className: \"w-full p-2\",\n      cookies: props.cookies\n    });\n\n    let comp3 = __jsx(AddArticle, {\n      className: \"w-full p-2\",\n      cookies: props.cookies\n    });\n\n    const componentsList = [comp1, comp2, comp3];\n    content = __jsx(\"div\", {\n      className: \"w-full\"\n    }, __jsx(Navbar, {\n      cookies: props.cookies,\n      className: \"w-full\"\n    }), __jsx(WelcomeBar, {\n      className: \"w-full pt-12\"\n    }), __jsx(\"div\", {\n      className: \"w-full flex pt-10\"\n    }, __jsx(\"div\", {\n      className: \"w-64 h-full\"\n    }, __jsx(SideBar, {\n      className: \"w-full h-full\",\n      clicked: clikced,\n      data: sideBarData,\n      onClick: x => setClicked(x)\n    })), __jsx(\"div\", {\n      className: \"w-full h-full\"\n    }, componentsList[clikced])));\n  } else if (!isLoading && (!data || data.length === 0)) {\n    content = __jsx(\"p\", null, \"Could not fetch any data.\");\n  }\n\n  return content;\n};\n\nUserPage.getInitialProps = ({\n  req\n}) => {\n  const cookies = parseCookies(req);\n  return {\n    cookies: cookies,\n    data: req.data\n  };\n};\n\nexport default UserPage;","map":null,"metadata":{},"sourceType":"module"}