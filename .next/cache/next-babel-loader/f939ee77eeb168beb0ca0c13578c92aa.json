{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { parseCookies } from '../../lib/parseCookies';\nimport { Navbar, SideBar, WelcomeBar } from '../../components/elements/bar';\nimport { ProductGrid } from '../../components/widgets/product';\nimport ProductGridList from '../../components/elements/list/ProductGridList';\nimport { AddProduct } from '../../components/elements/product';\nimport AddArticle from '../../components/elements/article/AddArticle';\n\nvar UserPage = function UserPage(props) {\n  console.log(props.cookies);\n  console.log(props.data);\n\n  var _useState = useState(),\n      data = _useState[0],\n      setData = _useState[1];\n\n  var _useState2 = useState(false),\n      isLoading = _useState2[0],\n      setIsLoading = _useState2[1];\n\n  var _useState3 = useState(0),\n      clikced = _useState3[0],\n      setClicked = _useState3[1];\n\n  useEffect(function () {\n    console.log('useEffect runs');\n    setIsLoading(true);\n    axios.defaults.withCredentials = true;\n\n    if (props.cookies.utoken != null) {\n      axios.get(process.env.domain + '/api/products/').then(function (res) {\n        console.log(res.data);\n        setData(JSON.stringify(res.data));\n        setIsLoading(false);\n      });\n    } else {\n      window.location = '/maker/auth';\n    }\n  }, []);\n\n  var content = __jsx(\"p\", null, \"Loading characters...\");\n\n  if (!isLoading && data && data.length > 0) {\n    console.log(data);\n    var productsList = JSON.parse(data).map(function (product) {\n      return __jsx(ProductGrid, {\n        className: \"h-auto w-auto m-2\",\n        key: product.id,\n        data: product,\n        owner: \"ilyass\"\n      });\n    });\n    var sideBarData = [{\n      id: 0,\n      value: 'Products'\n    }, {\n      id: 1,\n      value: 'Add Product'\n    }, {\n      id: 2,\n      value: 'Add Article'\n    }];\n\n    var comp1 = __jsx(ProductGridList, {\n      className: \"p-2\",\n      data: productsList\n    });\n\n    var comp2 = __jsx(AddProduct, {\n      className: \"p-2\",\n      cookies: props.cookies\n    });\n\n    var comp3 = __jsx(AddArticle, {\n      className: \"p-2\",\n      cookies: props.cookies\n    });\n\n    var componentsList = [comp1, comp2, comp3];\n    content = __jsx(\"div\", {\n      className: \"w-full\"\n    }, __jsx(Navbar, {\n      cookies: props.cookies,\n      className: \"w-full\"\n    }), __jsx(WelcomeBar, {\n      className: \"pt-12\"\n    }), __jsx(\"div\", {\n      className: \"w-full flex pt-10\"\n    }, __jsx(\"div\", {\n      className: \"w-64 h-full\"\n    }, __jsx(SideBar, {\n      className: \"w-full h-full\",\n      clicked: clikced,\n      data: sideBarData,\n      onClick: function onClick(x) {\n        return setClicked(x);\n      }\n    })), __jsx(\"div\", {\n      className: \"w-full h-full\"\n    }, componentsList[clikced])));\n  } else if (!isLoading && (!data || data.length === 0)) {\n    content = __jsx(\"p\", null, \"Could not fetch any data.\");\n  }\n\n  return content;\n};\n\nUserPage.getInitialProps = function (_ref) {\n  var req = _ref.req;\n  var cookies = parseCookies(req);\n  return {\n    cookies: cookies,\n    data: req.data\n  };\n};\n\nexport default UserPage;","map":null,"metadata":{},"sourceType":"module"}