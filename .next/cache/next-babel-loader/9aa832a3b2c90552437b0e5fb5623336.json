{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\1337\\\\Documents\\\\WorkSpace\\\\ecomart\\\\dev\\\\mormadeWebSite\\\\components\\\\elements\\\\product\\\\AddProduct.js\";\n\nvar __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport { TxtField, TxtArea, IntField } from '../../graphics/textFields';\nimport { BtnBbw } from '../../graphics/buttons';\nimport AddImageGrid from '../../widgets/image/AddImageGrid';\nimport { uploadImage } from '../../../services/api/uploadImage';\nimport { addProduct } from '../../../services/api/addProduct';\n\nvar AddProduct = function AddProduct(props) {\n  var data = {};\n  data['pics_list'] = [];\n\n  var _useState = useState([]),\n      files = _useState[0],\n      setFiles = _useState[1];\n\n  var getValue = function getValue(event, access) {\n    if (access == 'name') {\n      data['name'] = event.target.value;\n    } else if (access == 'description') {\n      data['description'] = event.target.value;\n    } else if (access == 'price') {\n      data['price'] = event.target.value;\n    } else if (access == 'quantity') {\n      data['quantity'] = event.target.value;\n    }\n  };\n\n  var appendFile = function appendFile(newFiles) {\n    newFiles.forEach(function (f) {\n      return files.push(f);\n    }, _this);\n  };\n\n  var removeFile = function removeFile(index) {\n    files.splice(index, 1);\n  };\n\n  var handleSubmit = function handleSubmit(event) {\n    var i, response;\n    return _regeneratorRuntime.async(function handleSubmit$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            event.preventDefault();\n            i = 0;\n\n          case 2:\n            if (!(i < files.length)) {\n              _context.next = 10;\n              break;\n            }\n\n            _context.next = 5;\n            return _regeneratorRuntime.awrap(uploadImage(event, files[0], props.cookies['csrftoken']).then(function (res) {\n              return res;\n            }));\n\n          case 5:\n            response = _context.sent;\n            data['pics_list'].push(response.data);\n\n          case 7:\n            i++;\n            _context.next = 2;\n            break;\n\n          case 10:\n            addProduct(data, props.cookies['csrftoken']).then(function (res) {\n              console.log(res);\n            });\n\n          case 11:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var content = __jsx(\"div\", {\n    className: \"m-4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 9\n    }\n  }, __jsx(\"form\", {\n    className: \"\",\n    action: \"\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 13\n    }\n  }, __jsx(TxtField, {\n    label: \"Product Name\",\n    onChange: function onChange(event) {\n      return getValue(event, 'name');\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 17\n    }\n  }), __jsx(TxtArea, {\n    label: \"Product Description\",\n    onChange: function onChange(event) {\n      return getValue(event, 'description');\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 17\n    }\n  }), __jsx(TxtField, {\n    label: \"Product Region\",\n    onChange: function onChange(event) {\n      return getValue(event, 'region');\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 17\n    }\n  }), __jsx(IntField, {\n    label: \"Price\",\n    onChange: function onChange(event) {\n      return getValue(event, 'price');\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 17\n    }\n  }), __jsx(IntField, {\n    label: \"Quantity\",\n    onChange: function onChange(event) {\n      return getValue(event, 'quantity');\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 17\n    }\n  }), __jsx(AddImageGrid, {\n    files: files,\n    addImage: appendFile,\n    removeImage: removeFile,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 17\n    }\n  }), __jsx(BtnBbw, {\n    className: \"w-full h-12 mt-8 mb-4\",\n    value: \"ADD PRODUCT\",\n    onClick: handleSubmit,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 17\n    }\n  })));\n\n  return content;\n};\n\nexport default AddProduct;","map":{"version":3,"sources":["C:/Users/1337/Documents/WorkSpace/ecomart/dev/mormadeWebSite/components/elements/product/AddProduct.js"],"names":["React","useState","TxtField","TxtArea","IntField","BtnBbw","AddImageGrid","uploadImage","addProduct","AddProduct","props","data","files","setFiles","getValue","event","access","target","value","appendFile","newFiles","forEach","f","push","removeFile","index","splice","handleSubmit","preventDefault","i","length","cookies","then","res","response","console","log","content"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\r\nimport { TxtField, TxtArea, IntField } from '../../graphics/textFields'\r\nimport { BtnBbw } from '../../graphics/buttons'\r\nimport AddImageGrid from '../../widgets/image/AddImageGrid'\r\nimport { uploadImage } from '../../../services/api/uploadImage'\r\nimport { addProduct } from '../../../services/api/addProduct'\r\n\r\nconst AddProduct = props => {\r\n\r\n    let data = {}\r\n    data['pics_list'] = []\r\n    const [files, setFiles] = useState([])\r\n\r\n    const getValue = (event, access) => {\r\n        if (access == 'name') {\r\n            data['name'] = event.target.value\r\n        } else if (access == 'description') {\r\n            data['description'] = event.target.value\r\n        } else if (access == 'price') {\r\n            data['price'] = event.target.value\r\n        } else if (access == 'quantity') {\r\n            data['quantity'] = event.target.value\r\n        }\r\n    }\r\n\r\n    const appendFile = (newFiles) => {\r\n        newFiles.forEach((f) => files.push(f), this)\r\n    }\r\n\r\n    const removeFile = (index) => {\r\n        files.splice(index, 1)\r\n    }\r\n\r\n    const handleSubmit = async (event) => {\r\n        event.preventDefault()\r\n        for (let i = 0; i < files.length; i++) {\r\n            let response = await uploadImage(event, files[0], props.cookies['csrftoken']).then((res) => res)\r\n            data['pics_list'].push(response.data)\r\n        }\r\n        addProduct(data, props.cookies['csrftoken']).then((res) => {\r\n            console.log(res)\r\n        })\r\n    }\r\n\r\n    let content = (\r\n        <div className=\"m-4\">\r\n            <form className=\"\" action=\"\">\r\n                <TxtField label=\"Product Name\" onChange={(event) => getValue(event, 'name')} />\r\n                <TxtArea label=\"Product Description\" onChange={(event) => getValue(event, 'description')} />\r\n                <TxtField label=\"Product Region\" onChange={(event) => getValue(event, 'region')} />\r\n                <IntField label=\"Price\" onChange={(event) => getValue(event, 'price')} />\r\n                <IntField label=\"Quantity\" onChange={(event) => getValue(event, 'quantity')} />\r\n                <AddImageGrid files={files} addImage={appendFile} removeImage={removeFile}/>\r\n                <BtnBbw className=\"w-full h-12 mt-8 mb-4\" value=\"ADD PRODUCT\" onClick={handleSubmit} />\r\n            </form>\r\n        </div>\r\n    )\r\n\r\n    return content\r\n}\r\n\r\nexport default AddProduct"]},"metadata":{},"sourceType":"module"}